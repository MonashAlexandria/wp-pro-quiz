jQuery(document).ready(function(a){a.fn.wpProQuiz_preview=function(){var b={openPreview:function(b){window.open(a(b).attr("href"),"wpProQuizPreview","width=900,height=900")}};a(".wpProQuiz_prview").click(function(a){b.openPreview(this);a.preventDefault()})};a.fn.wpProQuiz_questionEdit=function(){var b={setup:function(){a('input[name="answerType"]').click(function(){a(".answer_felder").children().css("display","none");switch(this.value){case "single":b.displaySingle("radio");break;case "multiple":b.displaySingle("checkbox");
break;case "free_answer":b.displayFreeAnswer();break;case "sort_answer":b.displaySortAnswer()}});a(".addAnswer").click(function(){b.addAnswer(this)});a(".deleteAnswer").click(function(){b.deleteAnswer(this)});a("#saveQuestion").click(function(){return d()});a(".sort_answer ul, .classic_answer ul").sortable({handle:".wpProQuiz_move",update:function(){b.setValueClassicAnswer()}})},displaySingle:function(b){a(".classic_answer").find('input[name="answerJson[classic_answer][correct][]"]').each(function(){a("<input type="+
b+" />").attr({name:this.name,value:this.value,checked:this.checked}).insertBefore(this)}).remove();a(".classic_answer").css("display","block")},displayFreeAnswer:function(){a(".free_answer").css("display","block")},displaySortAnswer:function(){a(".sort_answer").css("display","block")},addAnswer:function(f){a(f).siblings("ul").children().first().clone().css("display","block").appendTo(a(f).siblings("ul"));b.setValueClassicAnswer();a(".deleteAnswer").click(function(){b.deleteAnswer(this)})},deleteAnswer:function(f){a(f).parent("li").remove();
b.setValueClassicAnswer()},setValueClassicAnswer:function(){i=0;a('input[name="answerJson[classic_answer][correct][]"]').each(function(){this.value=i++})}},d=function(){var b=a('input[name="title"]'),d=tinymce.editors.question.getContent(),g=a('input[name="answerType"]:checked');if(e(b.val()))return alert(wpProQuizLocalize.no_title_msg),!1;if(e(d))return alert(wpProQuizLocalize.no_question_msg),!1;if("single"==g.val()||"multiple"==g.val()){var c=!0;if(1>a('input[name="answerJson[classic_answer][correct][]"]:checked').each(function(){c=
""!=a.trim(a(this).parent().siblings("textarea").val())?c&1:!1}).size())return alert(wpProQuizLocalize.no_correct_msg),!1;if(!c)return alert(wpProQuizLocalize.no_answer_msg),!1}else if("sort_answer"==g.val()&&(c=!1,a('textarea[name="answerJson[answer_sort][answer][]"]').each(function(){c=e(a(this).val())?c|0:!0}),!c))return alert(wpProQuizLocalize.no_answer_msg),!1;return!0},e=function(a){return!a||0===a.length};b.setup();1>a('input[name="answerType"][checked="checked"]').size()&&a('input[name="answerType"][value="single"]').attr({checked:"checked"});
a('input[name="answerType"]:checked').click()};a.fn.wpProQuiz_questionOverall=function(){var b={saveSort:function(){var d={action:"update_sort",sort:b.parseSortArray()},e=(window.location.pathname+window.location.search).replace("admin.php","admin-ajax.php")+"&action=save_sort";a.post(e,d,function(b){console.debug(b);a("#sortMsg").show(400).delay(1E3).hide(400)})},parseSortArray:function(){var b=[];a("tbody tr").each(function(){b.push(this.id.replace("wpProQuiz_questionId_",""))});return b}};a(".wp-list-table tbody").sortable({handle:".wpProQuiz_move"});
a(".wpProQuiz_delete").click(function(a){return!confirm(wpProQuizLocalize.delete_msg)?(a.preventDefault(),!1):!0});a("#wpProQuiz_saveSort").click(function(a){a.preventDefault();b.saveSort()});console.debug(a)};a(".wpProQuiz_quizOverall").wpProQuiz_preview();a(".wpProQuiz_questionEdit").wpProQuiz_questionEdit();a(".wpProQuiz_questionOverall").wpProQuiz_questionOverall()});
